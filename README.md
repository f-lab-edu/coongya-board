# coongya-board
게시판 프로젝트

## 요구사항 정의서
### 1. 개요
#### 1.1. 목적
질문 & 답변 게시판 프로젝트의 요구사항을 정의한다.
#### 1.2. 범위
- 질문 & 답변 게시판 시스템
- REST API 기반 백엔드 구현만 한다.
- 액터는 사용자(user)만 고려한다.
- 관리자(admin) 화면은 제외 -> 추후 확장 가능

### 2. 기능 요구사항 (필수 기능)
#### 2.1. 회원 관리
##### 2.1.1. 회원 가입
1. 자체 회원 가입 기능을 제공한다.
- 회원 ID, 비밀번호 등 회원 데이터를 직접 관리하여 암호화, 보안에 대한 이해를 목표로 한다.
- OAuth, 소셜 로그인 등 서드파티 인증 기능은 제외(추후 확장 가능) -> 이번에 구현하지 않지만 공부는 한다.
2. 사용자는 다음 정보를 입력하여 회원 가입을 한다.
- 필수 입력 : ID(email), 비밀번호 -> 필수 입력값 검증 수행
- 선택 입력 : 닉네임 -> 게시글 작성자에 닉네임만 표시되게 할거면 필수 입력으로 하고 중복 검사를 진행해야 하는가?
3. ID는 email 형식으로만 입력 가능하다.
- email 형식을 검증하여 잘못된 형식을 입력한 경우 검증 에러를 반환하고 사용자에게 에러 메시지를 보여준다.
- 에러 메시지 : 이메일 형식이 올바르지 않습니다.
4. ID(email)는 회원 고유 식별자로 사용되므로 중복 검사를 진행한다.
- 이미 사용 중인 ID(email)를 입력한 경우 검증 에러를 반환하고 사용자에게 에러 메시지를 보여준다.
- 에러 메시지 : 이미 사용 중인 이메일입니다.
5. 비밀번호의 최소 길이 및 최대 길이를 검증한다.
- 입력한 비밀번호가 허용 가능 길이를 벗어난 경우 검증 에러를 반환하고 사용자에게 에러 메시지를 보여준다.
- 에러 메시지 : 비밀번호는 최소 1자, 최대 32자까지 입력할 수 있습니다.
6. 비밀번호에 공백을 입력할 수 없다.
- 비밀번호에 공백을 입력한 경우 검증 에러를 반환하고 사용자에게 에러 메시지를 보여준다.
- 에러 메시지 : 비밀번호에 공백을 입력할 수 없습니다.

~~7. 사용자 입력 실수를 방지하기 위해 비밀번호와 비밀번호 확인 필드의 값이 일치하는지 검증한다.~~ -> 제외(서버에서 검증하려면 비밀번호 확인 데이터도 서버에 전송해야 하는데 불필요하다고 판단됨, 프론트 검증 영역)
~~- 비밀번호와 비밀번호 확인 필드의 값이 일치하지 않는 경우 검증 에러를 반환하고 사용자에게 에러 메시지를 보여준다.~~
~~- 에러 메시지 : 비밀번호와 비밀번호 확인이 일치하지 않습니다.~~

8. 비밀번호를 네트워크로 전송 시 통신 안전성을 위해 SSL 레이어(HTTPS)를 사용한다. -> 공부
9. 비밀번호는 서버 저장 시 원문으로 저장하지 않고 단방향 암호화하여 저장한다. -> 공부
- SHA-256 알고리즘 적용
10. 회원 가입 성공 시 자동 로그인한다.
- DB에 회원 정보, 가입 일시 등을 저장한다.
 
##### 2.1.2. 로그인
1. 사용자는 ID(email), 비밀번호를 입력하여 로그인한다.
- 필수 입력 검증 수행
2. 입력받은 ID(email)로 회원 정보를 조회한다.
- 회원 정보가 존재하지 않는 경우 검증 에러를 반환하고 사용자에게 에러 메시지를 보여준다.
- 에러 메시지 : 이메일 또는 비밀번호를 확인해주세요.
3. 입력받은 ID(email)에 해당하는 회원 정보가 존재하는 경우 입력받은 비밀번호와 저장된 비밀번호가 일치하는지 검증한다.
- 입력받은 비밀번호도 SHA-256 해시로 암호화한 후에 검증한다.
- 비밀번호가 일치하지 않는 경우 검증 에러를 반환하고 사용자에게 에러 메시지를 보여준다.
- 에러 메시지 : 이메일 또는 비밀번호를 확인해주세요.
4. 비밀번호를 네트워크로 전송 시 통신 안전성을 위해 SSL 레이어(HTTPS)를 사용한다.
5. 인증 방식 -> 공부 후에 둘 다 구현하거나 하나만 선택하여 구현한다.
- 세션 방식 : 로그인 성공 시 서버에서 세션을 생성하고 쿠키에 세션ID를 저장하여 관리한다.
- 토큰 방식 : 로그인 성공 시 액세스 토큰(JWT)를 발급하여 클라이언트에 반환한다. 이후에 클라이언트가 API 호출 시 인증 수단으로 토큰을 함께 보낸다.

##### 2.1.3. 로그아웃 
1. 사용자는 로그아웃할 수 있다. -> 인증 방식에 따라 구현
- 세션 방식 : 서버 세션 삭제
- 토큰 방식 : 클라이언트의 액세스 토큰 삭제, 서버는 리프레시 토큰 삭제 또는 블랙리스트 등록

#### 2.2. 게시글 관리
##### 2.2.1. 게시글 목록 조회
1. 인증된 사용자만 게시글 목록을 조회할 수 있다.
2. 게시글 목록 조회 시 제공되는 정보
- 제목
- 내용 한 줄 미리보기
- 작성자 닉네임
- 작성 일시
- 조회수
3. 페이징 기능을 제공한다.
- 웹 : 페이지 번호
- 앱 : 무한 스크롤
4. 정렬 옵션에 따른 정렬 기능을 제공한다.
- 최신순, 조회수 순, 답변많은순 -> 좋아요 기능 확장 시 좋아요 순 정렬 옵션 추가

##### 2.2.2. 게시글 작성
1. 인증된 사용자만 게시글을 작성할 수 있다.
2. 사용자는 다음 항목을 입력하여 게시글을 작성한다.
- 필수 입력 : 제목, 내용 -> 필수 입력값 검증 수행
3. 서버는 현재 사용자 정보를 게시글의 작성자 정보로 저장한다.
4. 작성 성공 시 게시글 ID를 반환한다.

##### 2.2.3. 게시글 수정
1. 인증된 사용자만 게시글을 수정할 수 있다.
2. 사용자는 본인이 작성한 게시글만 수정할 수 있다.
3. 수정 가능한 항목은 제목, 내용이다.
- 필수 입력 : 제목, 내용 -> 필수 입력값 검증 수행 
4. 수정 성공 시 수정 일시를 저장한다.
-> 게시글 작성 일시를 업데이트하거나 작성 일시와 수정 일시를 따로 관리하는 방식 중에서 선택한다.

##### 2.2.4. 게시글 삭제
1. 인증된 사용자만 게시글을 삭제할 수 있다.
2. 사용자는 본인이 작성한 게시글만 삭제할 수 있다.
3. 삭제 정책은 다음 두 가지 방식 중 논리 삭제 방식을 사용한다.
- 물리 삭제 : DB에서 실제로 게시글 데이터를 삭제
- 논리 삭제 : 삭제 여부 상태 관리
4. 삭제된 게시글에 달린 댓글 처리 정책 -> 댓글도 따로 삭제 여부 상태 관리? 게시글 삭제 여부로 관리? 숨김 처리?
5. 삭제 성공 시 삭제 일시를 저장한다.

##### 2.2.5. 게시글 조회
1. 인증된 사용자만 게시글을 조회할 수 있다.
2. 게시글 조회 시 제공되는 정보
- 제목
- 내용
- 작성자 닉네임
- 작성 일시
- 조회수
- 댓글 목록 -> 2.3.4. 댓글 조회 기능과 연동
3. 사용자가 게시글을 조회할 때마다 해당 게시글의 조회수를 1 증가시킨다.


